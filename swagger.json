{
  "swagger" : "2.0",
  "info" : {
    "description" : "This is an API to allow a client to search a remote index with Terrier",
    "version" : "1.0.0",
    "title" : "Remote Terrier API",
    "contact" : {
      "email" : "2133815j@student.gla.ac.uk"
    },
    "license" : {
      "name" : "Apache 2.0",
      "url" : "http://www.apache.org/licenses/LICENSE-2.0.html"
    }
  },
  "paths" : {
    "/index" : {
      "get" : {
        "summary" : "get all available indexes",
        "operationId" : "getIndexes",
        "description" : "Get all available indexes\n",
        "produces" : [ "application/json" ],
        "parameters" : [ ],
        "responses" : {
          "200" : {
            "description" : "list of available indexes",
            "schema" : {
              "type" : "array",
              "items" : {
                "$ref" : "#/definitions/RemoteIndex"
              }
            }
          },
          "500" : {
            "description" : "server error while retrieving indexes"
          }
        }
      }
    },
    "/index/import" : {
      "post" : {
        "summary" : "import existing index and return its id",
        "operationId" : "importIndex",
        "consumes" : [ "application/json" ],
        "produces" : [ "application/json" ],
        "parameters" : [ {
          "in" : "body",
          "name" : "index",
          "description" : "Index object to be imported. Returns the name of the imported index",
          "required" : true,
          "schema" : {
            "$ref" : "#/definitions/RemoteIndex"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "index successfuly created",
            "schema" : {
              "type" : "string"
            }
          },
          "400" : {
            "description" : "incorrect input"
          }
        }
      }
    },
    "/index/{indexName}/retrieve" : {
      "get" : {
        "summary" : "run a query",
        "operationId" : "retrieve",
        "description" : "Runs a query\n",
        "consumes" : [ "application/json" ],
        "produces" : [ "application/json" ],
        "parameters" : [ {
          "in" : "path",
          "name" : "indexName",
          "type" : "string",
          "description" : "Id of the index to be queried",
          "required" : true
        }, {
          "in" : "query",
          "name" : "queryId",
          "type" : "string"
        }, {
          "in" : "query",
          "name" : "queryString",
          "type" : "string",
          "required" : true
        }, {
          "in" : "query",
          "name" : "matchingModel",
          "type" : "string",
          "required" : false
        }, {
          "in" : "query",
          "name" : "weightingModel",
          "type" : "string",
          "required" : false
        }, {
          "in" : "query",
          "name" : "queryControlNames",
          "type" : "array",
          "items" : {
            "type" : "string"
          }
        }, {
          "in" : "query",
          "name" : "queryControlValues",
          "type" : "array",
          "items" : {
            "type" : "string"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "query results",
            "schema" : {
              "$ref" : "#/definitions/RemoteResultSet"
            }
          },
          "403" : {
            "description" : "incorrect input"
          },
          "404" : {
            "description" : "index not found"
          }
        }
      }
    },
    "/index/{indexName}" : {
      "get" : {
        "summary" : "view stats about the specified index",
        "operationId" : "stats",
        "description" : "View stats about the index\n",
        "produces" : [ "application/json" ],
        "parameters" : [ {
          "in" : "path",
          "name" : "indexName",
          "type" : "string",
          "required" : true
        } ],
        "responses" : {
          "200" : {
            "description" : "stats object for the specified index",
            "schema" : {
              "$ref" : "#/definitions/IndexStats"
            }
          },
          "404" : {
            "description" : "index not found"
          }
        }
      },
      "delete" : {
        "summary" : "remove specified index from the list of imported indexes",
        "operationId" : "deleteIndex",
        "description" : "Remove the specified index from the list of imported indexes\n",
        "produces" : [ "application/json" ],
        "parameters" : [ {
          "in" : "path",
          "name" : "indexName",
          "type" : "string",
          "required" : true
        } ],
        "responses" : {
          "200" : {
            "description" : "index successfuly deleted",
            "schema" : {
              "type" : "string"
            }
          },
          "404" : {
            "description" : "specified index not found"
          }
        }
      }
    },
    "/documents/{collection}" : {
      "get" : {
        "summary" : "get list of documents in the specified collection",
        "operationId" : "getDocuments",
        "description" : "Get a list of all documents in specified collection\"\n",
        "produces" : [ "application/json" ],
        "parameters" : [ {
          "name" : "collection",
          "in" : "path",
          "description" : "path of the collection from which documents are to be shown",
          "required" : true,
          "type" : "string"
        } ],
        "responses" : {
          "200" : {
            "description" : "list of documents",
            "schema" : {
              "type" : "array",
              "items" : {
                "$ref" : "#/definitions/RemoteDocument"
              }
            }
          },
          "404" : {
            "description" : "collection not found"
          }
        }
      },
      "post" : {
        "summary" : "add documents to a collection",
        "operationId" : "addDocuments",
        "description" : "Add documents to the specified collection\n",
        "consumes" : [ "application/x-www-form-urlencoded" ],
        "produces" : [ "application/json" ],
        "parameters" : [ {
          "name" : "collection",
          "in" : "path",
          "description" : "path of the collection for which documents are to be shown",
          "required" : true,
          "type" : "string"
        }, {
          "name" : "path",
          "in" : "formData",
          "description" : "path to the documents to be added",
          "required" : true,
          "type" : "string"
        } ],
        "responses" : {
          "200" : {
            "description" : "successfully added documents"
          },
          "400" : {
            "description" : "invalid input"
          },
          "500" : {
            "description" : "server error while adding documents"
          }
        }
      },
      "delete" : {
        "summary" : "delete document from specified collection",
        "operationId" : "deleteDocuments",
        "description" : "Delete document(s) from the specified collection\n",
        "consumes" : [ "application/json" ],
        "produces" : [ "application/json" ],
        "parameters" : [ {
          "name" : "collection",
          "in" : "path",
          "description" : "path of the index from the collection of which documents are to be deleted",
          "required" : true,
          "type" : "string"
        }, {
          "name" : "documents",
          "in" : "query",
          "description" : "document to be deleted",
          "required" : true,
          "type" : "string"
        } ],
        "responses" : {
          "200" : {
            "description" : "documents successfully deleted"
          },
          "400" : {
            "description" : "invalid input"
          },
          "500" : {
            "description" : "server error while deleting documents"
          }
        }
      }
    },
    "/status" : {
      "get" : {
        "summary" : "get current server status",
        "operationId" : "status",
        "description" : "Get the current server status, e.g. memory usage\"\n",
        "produces" : [ "application/json" ],
        "parameters" : [ ],
        "responses" : {
          "200" : {
            "description" : "received server status",
            "schema" : {
              "$ref" : "#/definitions/ServerStatus"
            }
          }
        }
      }
    }
  },
  "definitions" : {
    "RemoteIndex" : {
      "type" : "object",
      "required" : [ "path", "prefix", "indexName", "props" ],
      "properties" : {
        "path" : {
          "type" : "string",
          "example" : "C:/path/to/index"
        },
        "prefix" : {
          "type" : "string",
          "example" : "data"
        },
        "indexName" : {
          "type" : "string",
          "example" : "firstIndex",
          "description" : "the name under which the index will be stored and accessed"
        },
        "props" : {
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/KeyValue"
          }
        }
      }
    },
    "IndexStats" : {
      "type" : "object",
      "properties" : {
        "numberOfDocuments" : {
          "type" : "integer"
        },
        "numberOfTerms" : {
          "type" : "integer"
        },
        "numberOfTokens" : {
          "type" : "integer",
          "format" : "int64"
        },
        "numberOfPointers" : {
          "type" : "integer",
          "format" : "int64"
        }
      }
    },
    "Metadata" : {
      "type" : "object",
      "required" : [ "metaKeys", "metaItems" ],
      "properties" : {
        "metaKeys" : {
          "type" : "array",
          "items" : {
            "type" : "string"
          }
        },
        "metaItems" : {
          "type" : "array",
          "items" : {
            "type" : "string"
          }
        }
      }
    },
    "RemoteResultSet" : {
      "type" : "object",
      "required" : [ "docIds", "scores", "resultSize" ],
      "properties" : {
        "documents" : {
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/ResultDocument"
          }
        },
        "resultSize" : {
          "type" : "integer"
        }
      }
    },
    "ResultDocument" : {
      "type" : "object",
      "properties" : {
        "docId" : {
          "type" : "integer"
        },
        "score" : {
          "type" : "integer"
        },
        "metadata" : {
          "$ref" : "#/definitions/Metadata"
        }
      }
    },
    "RemoteDocument" : {
      "type" : "object",
      "required" : [ "filename" ],
      "properties" : {
        "filename" : {
          "type" : "string"
        }
      }
    },
    "KeyValue" : {
      "type" : "object",
      "properties" : {
        "propName" : {
          "type" : "string"
        },
        "propValue" : {
          "type" : "string"
        }
      }
    },
    "ServerStatus" : {
      "type" : "object",
      "properties" : {
        "usedMemory" : {
          "type" : "string"
        },
        "availableMemory" : {
          "type" : "string"
        },
        "numberOfIndexes" : {
          "type" : "string",
          "description" : "nmber of imported indexes"
        }
      }
    }
  },
  "host" : "virtserver.swaggerhub.com",
  "schemes" : [ "https" ],
  "basePath" : "/bjonynas/remote-terrier-api/1.0.0"
}